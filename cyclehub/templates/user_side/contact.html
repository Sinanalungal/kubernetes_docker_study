{%extends 'user_side/base.html'%}
{%load static %}

{% block content1 %}
<style>
	.error-message {
	  font-size: 11px;
	  color: red;
	}
  </style>
<link href="{% static 'user_side/css/about.css'%}" rel="stylesheet">
{% endblock %}

{% block content %}


<div style='background-color:#1d4289;height:70px;width:100%;color:white;font-size:30px;' class='d-flex align-items-center justify-content-center '><strong>CONTACT US</strong></div>

<section id="contact" class=" mt-3 pt-4 pb-4 bg_light_1">
 <div class="container-xl">
   <div class="row contact_1 ">
     <div class="col-md-4">
	  <div class="contact_1i text-center  bg-white p-4">
		<span class="bg_yell text-white fs-2 span_1"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg></span>
		<h5 class="mt-3">Our Location</h5>
	   <p class="mb-0 mt-3 ">Main road, Tirur,<br>  Malappuram, Kerala</p>
	  </div>
	 </div>
	 <div class="col-md-4">
	  <div class="contact_1i text-center  bg-white p-4">
	   <span class="bg_yell text-white fs-2 span_1"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M121 32C91.6 32 66 52 58.9 80.5L1.9 308.4C.6 313.5 0 318.7 0 323.9V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V323.9c0-5.2-.6-10.4-1.9-15.5l-57-227.9C446 52 420.4 32 391 32H121zm0 64H391l48 192H387.8c-12.1 0-23.2 6.8-28.6 17.7l-14.3 28.6c-5.4 10.8-16.5 17.7-28.6 17.7H195.8c-12.1 0-23.2-6.8-28.6-17.7l-14.3-28.6c-5.4-10.8-16.5-17.7-28.6-17.7H73L121 96z"/></svg></span>
	   <h5 class="mt-3">Our Email</h5>
	   <p class="mb-0 mt-3"><span class="fw-bold">Email Us:</span> cyclehub578@gmail.com<br>&nbsp;</p>
	  </div>
	 </div>
	 <div class="col-md-4">
	  <div class="contact_1i text-center  bg-white p-4">
	   <span class="bg_yell text-white fs-2 span_1"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"/></svg></span>
	   <h5 class="mt-3">Phone Number</h5>
	   <p class="mb-0 mt-3"><span class="fw-bold">Contacr Numbers:</span>+91 9207400638<br> &nbsp;</p>
	  </div>
	 </div>
  </div>
 </div>
</section>

<section id="contact_o" class="pt-4 pb-4">
 <div class="container-xl">
   <div class="row prod_1 mb-4 text-center">
     <div class="col-md-12">
	  <h6 class="h_line font_13">LETâ€™S TALK</h6>
	  <h2 class="col_yell mt-3">SEND US A MASSAGE</h2>
	  <p class="mb-0">We are always happy to talk with you. Be sure to write to us if you have any <br> questions or need help and support.</p>
	 </div>
  </div>
  <form id='contactForm'>
	{%csrf_token%}
   <div class="row contact_o1 d-flex align-items-center justify-content-center mt-5">
       <div class="col-md-8">
	    <div class="contact_o1l">
		 <div class="contact_o1li row">
		  <div class="col-md-12">
		   <div class="contact_o1lil">
		     <div class="input-group p-2 bg_light">
				<input type="text" class="form-control border-0 bg-transparent" name='fullname' placeholder="Full Name*">
				<span class="input-group-btn">
					<button class="btn btn-primary bg-transparent border-0 fs-6" type="button">
						<i class="fa fa-user col_light"></i> </button>
				</span>
		</div>
		<div class="error-message" id="fullname-error"></div>
		   </div>
		  </div>
		  <div class="col-md-6">
		   
		   </div>
		  </div>
		 </div>
		 <div class="contact_o1li row mt-3">
		  <div class="col-md-6">
		   <div class="contact_o1lil">
		     <div class="input-group p-2 bg_light">
				<input type="text" class="form-control border-0 bg-transparent" name='email' placeholder="Your Email*">
				<span class="input-group-btn">
					<button class="btn btn-primary bg-transparent border-0 fs-6" type="button">
						<i class="fa fa-envelope col_light"></i> </button>
				</span>
		</div>
		<div class="error-message" id="email-error"></div>
		   </div>
		  </div>
		  <div class="col-md-6">
		   <div class="contact_o1lil">
		     <div class="input-group p-2 bg_light">
				<input type="text" class="form-control border-0 bg-transparent" name='phonenumber' placeholder="Phone*">
				<span class="input-group-btn">
					<button class="btn btn-primary bg-transparent border-0 fs-6" type="button">
						<i class="fa fa-phone col_light"></i> </button>
				</span>
		</div>
		<div class="error-message" id="phonenumber-error"></div>
		   </div>
		  </div>
		 </div>
		 <div class="contact_o1li row mt-3 mb-4">
		  <div class="col-md-12">
		   <div class="contact_o1lil">
		     <textarea placeholder="Enter Your Message" class="form-control bg_light border-0 form_area" name='message'></textarea>
			 <div class="error-message" id="message-error"></div>
			 <h6 class="mb-0 mt-4"><button class="button" type='submit' style='cursor:pointer;'>SUBMIT</button></h6>
			 

		   </div>
		  </div>
		</form>
		 </div>
		</div>
	   </div>
	   
  </div>
 </div>
</section>


<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script>
    $(document).ready(function () {
        // Add validation rules
        $("#contactForm").validate({
            rules: {
                fullname: {
					required: true,
					minlength: 3,
					pattern: /^[a-zA-Z]+(?:\s[a-zA-Z]+)*$/, 
				},
                email: {
                    required: true,
                    email: true,
                    customEmail: true, 
                },
                phonenumber: {
                    required: true,
                    digits: true,
                    minlength: 10,
                    maxlength: 10,
                },
                message: {
                    required: true,
                },
            },
            messages: {
                fullname: {
					required: "Please enter your full name.",
					minlength: "Full name must be at least 3 characters long.",
					pattern: "Please enter a valid full name without consecutive spaces and special characters.",
				},
                email: {
                    customEmail: "Please enter a valid email with the full domain, like 'email@gmail.com'.",
                },
                phonenumber: {
                    digits: "Please enter only numbers for the phone number.",
                    minlength: "Phone number must be exactly 10 digits.",
                    maxlength: "Phone number must be exactly 10 digits.",
                },
            },
            errorElement: "span",
            errorClass: "error-message",
            errorPlacement: function (error, element) {
                // Place the error message under the corresponding input field
                error.appendTo("#" + element.attr("name") + "-error");
            },
        });

        // Custom email validation rule
        $.validator.addMethod("customEmail", function (value, element) {
            return /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(value);
        }, "Please enter a valid email with the full domain, like 'email@gmail.com'.");

        $("#contactForm").submit(function (e) {
            e.preventDefault(); 

            if ($("#contactForm").valid()) {
                $.ajax({
                    type: "POST",
                    url: "{% url 'contact' %}",
                    data: $("#contactForm").serialize(), 
                    success: function (data) {
						if (data.success) {
							Swal.fire({
								title: "Success",
								text: data.message,
								icon: "success"
							});
					
							// Optionally, you can clear the form or perform other actions
							$("#contactForm")[0].reset();
						} else {
							Swal.fire({
								title: "Error",
								text: data.message,
								icon: "error"
							});
						}
					},
                    error: function (error) {
						Swal.fire({
							title: "Error",
							text: 'Something Went Wrong',
							icon: "error"
						});
                        console.log(error);
                    }
                });
            }
        });
    });
</script>

  {% endblock %}
